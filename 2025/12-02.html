<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Daily Page</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 0.8em;
      line-height: 1.4;
      padding: 2em;
      position: relative;
    }
    .nav-buttons {
      position: absolute;
      top: 1em;
      left: 1em;
      display: flex;
      flex-direction: row;
      gap: 0.5em;
    }
    .nav-buttons button {
      width: 80px;
      height: 30px;
      font-size: 0.7em;
      padding: 0;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #f0f0f0;
      color: #333;
      cursor: pointer;
      text-align: center;
      transition: background-color 0.2s, color 0.2s;
    }
    .nav-buttons button:hover {
      background-color: #ddd;
    }
    .box1 {
      margin-left: -1em;
      margin-top: 3em;
    }
    h3.bar3 {
      font-size: 1.1em;
      margin-left: 1em;
    }
  </style>
  <script>
    const pad = (n) => String(n).padStart(2, '0');

    // URLから日付を取得 (/yyyy/mm-dd.html 形式)
    const getCurrentDateFromURL = () => {
      const path = location.pathname;
      // 正規表現: /数字4桁/数字2桁-数字2桁.html
      const match = path.match(/\/(\d{4})\/(\d{2})-(\d{2})\.html$/);
      if (!match) return null;
      const [_, yyyy, mm, dd] = match;
      return new Date(Number(yyyy), Number(mm) - 1, Number(dd));
    };

    // 移動処理
    const goToRelativeDay = async (offset) => {
      const baseDate = getCurrentDateFromURL();
      
      // URL形式が正しくない場合も pending へ
      if (!baseDate) {
        location.href = "../pending.html"; 
        return;
      }

      // 日付計算
      baseDate.setDate(baseDate.getDate() + offset);

      const nextY = baseDate.getFullYear();
      const nextM = pad(baseDate.getMonth() + 1);
      const nextD = pad(baseDate.getDate());

      // 次のファイルのパス (../年/月-日.html)
      const target = `../${nextY}/${nextM}-${nextD}.html`;
      
      // エラー時の移動先 (../pending.html)
      // ※現在は /yyyy/ の中にいるため、pending.html がルートにある場合は ../ を付けます
      const pendingUrl = "../pending.html"; 

      try {
        // HEADメソッドでファイルの存在確認を行う
        const res = await fetch(target, { method: 'HEAD' });

        if (res.ok) {
          // ファイル(およびフォルダ)が存在すれば移動
          location.href = target;
        } else {
          // 404 Not Found (フォルダがない、ファイルがない) などの場合は pending へ
          location.href = pendingUrl;
        }
      } catch (error) {
        // 通信エラーなどの場合も pending へ
        console.error("Fetch error:", error);
        location.href = pendingUrl;
      }
    };
  </script>
</head>
<body>
  <div class="nav-buttons">
    <button onclick="goToRelativeDay(-1)">Previous</button>
    <button onclick="goToRelativeDay(1)">Next</button>
  </div>
<div class="box1">

<h3 class='bar3'><i class="fas fa-calendar-check"></i>2025/12/02</h3>





      <!-- 当日News入力　ここまで -->
</div>
</body>
</html>
