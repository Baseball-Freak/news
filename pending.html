<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>準備中</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
      background: #fff;
    }
    /* メッセージ部分のスタイル */
    #status-msg {
      font-weight: bold;
      color: #333;
    }
  </style>

  <script>
    // ---------------------------------------------
    // 3秒待ってから「今日の記事があるか」チェック
    // ---------------------------------------------
    setTimeout(async () => {
      const statusMsg = document.getElementById('status-msg');

      // 1️⃣ 今日の日付を取得
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const dd = String(today.getDate()).padStart(2, '0');

      // 2️⃣ 新構成に対応（例: 2025/12-07.html）
      const targetFile = `${yyyy}/${mm}-${dd}.html`;

      try {
        // 3️⃣ 存在確認（HEADリクエストで軽量チェック）
        const res = await fetch(targetFile, { method: 'HEAD' });

        if (res.ok) {
          // ✅ 記事ファイルが存在 → 自動移動
          statusMsg.innerText = "最新記事へ移動します...";
          location.href = targetFile;
        } else {
          // ❌ ファイルが存在しない → メッセージのみ表示
          statusMsg.innerText = "本日分の記事はまだ投稿されていません。";
          statusMsg.style.color = "red";

          // ▼ 必要に応じてトップへ戻す場合はコメント解除
          // location.href = "today.html";
        }
      } catch (e) {
        // ⚠ 通信エラー時
        console.error("Error checking file:", e);
        statusMsg.innerText = "通信エラーが発生しました。";
        statusMsg.style.color = "red";
      }
    }, 3000);
  </script>
</head>

<body>
  <!-- ID付き要素：ここに動的メッセージを出す -->
  <p id="status-msg">本日分の記事はまだ準備中です。確認しています...</p>

  <!-- トップページへの戻りリンク -->
  <p style="font-size:0.8em; margin-top:20px;">
    <a href="today.html">Todayへ戻る</a>
  </p>
</body>
</html>
