<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>News Summary</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 0.8em;
      line-height: 1.4;
      padding: 2em;
      position: relative;
    }

    .nav-buttons {
      position: absolute;
      top: 1em;
      left: 1em;
      display: flex;
      flex-direction: row;
      gap: 0.5em;
    }

    .nav-buttons button {
      width: 80px;
      height: 30px;
      font-size: 0.7em;
      padding: 0;
      border: 1px solid #333;
      border-radius: 4px;
      background-color: #f0f0f0;
      color: #333;
      cursor: pointer;
      text-align: center;
      transition: background-color 0.2s, color 0.2s;
    }

    .nav-buttons button:hover {
      background-color: #ddd;
    }

    .box1 {
      margin-left: -1em;
      margin-top: 3em;
    }

    h3.bar3 {
      font-size: 1.1em;
      margin-left: 1em;
    }

    ul {
      padding-left: 1em;
    }

    li.news-icon {
      margin-bottom: 0.5em;
    }
  </style>

  <script>
    // ゼロ埋め関数
    const pad = (n) => String(n).padStart(2, '0');

    // 移動ボタン処理
    const formatDateMMDD = (date) => {
      const mm = pad(date.getMonth() + 1);
      const dd = pad(date.getDate());
      return `${mm}-${dd}`;
    };

    const goToRelativeDay = async (offset) => {
      const currentYear = new Date().getFullYear();
      let baseDate;

      const urlMatch = location.pathname.match(/(\d{2})-(\d{2})\.html$/);
      if (urlMatch) {
        const [_, mm, dd] = urlMatch;
        baseDate = new Date(currentYear, parseInt(mm) - 1, parseInt(dd));
      } else {
        baseDate = new Date();
      }

      baseDate.setDate(baseDate.getDate() + offset);
      const target = `${formatDateMMDD(baseDate)}.html`;

      try {
        const response = await fetch(target, { method: 'HEAD' });
        if (response.ok) {
          location.href = target;
        } else {
          location.href = "pending.html";
        }
      } catch (error) {
        location.href = "pending.html";
      }
    };

    // ▼ 新規追加部分：当日チェック ▼
    window.addEventListener('DOMContentLoaded', () => {
      // 今日の日付を YYYY/MM/DD 形式で取得
      const now = new Date();
      const todayStr = `${now.getFullYear()}/${pad(now.getMonth() + 1)}/${pad(now.getDate())}`;

      // box1 内の h3.bar3 を探す
      const heading = document.querySelector('.box1 h3.bar3');

      if (!heading) {
        // h3 が存在しない場合
        location.href = "blank.html";
        return;
      }

      // テキストから日付部分を抽出
      const text = heading.textContent.trim();
      const dateMatch = text.match(/(\d{4})\/(\d{2})\/(\d{2})/);

      if (!dateMatch) {
        // 日付形式がない場合
        location.href = "blank.html";
        return;
      }

      const foundDate = `${dateMatch[1]}/${dateMatch[2]}/${dateMatch[3]}`;

      // 当日の日付と一致しなければ blank.html へ
      if (foundDate !== todayStr) {
        location.href = "blank.html";
      }
    });
    // ▲ 当日チェックここまで ▲
  </script>
</head>

<body>
  <div class="nav-buttons">
    <button onclick="goToRelativeDay(-1)">Previous</button>
    <button onclick="goToRelativeDay(1)">Next</button>
  </div>

  <div class="box1">
    <!-- 当日News入力　ここから -->
    <!--
    <h3 class='bar3'><i class="fas fa-calendar-check"></i>2026/01/01</h3>
    -->
    <p>本日分の記事はまだ準備中です。後ほどご確認ください。</p>

    <hr style="border:none; border-top:2px dashed green; margin:20px 0;">

    <a href="https://px.a8.net/svt/ejp?a8mat=45IED9+40OCS2+348+686ZL" 
       rel="nofollow noopener noreferrer" target="_blank">
      <img border="0" width="120" height="60" alt="" 
           src="https://www20.a8.net/svt/bgt?aid=251121213243&wid=001&eno=01&mid=s00000000404001046000&mc=1">
    </a>
    <img border="0" width="1" height="1" 
         src="https://www15.a8.net/0.gif?a8mat=45IED9+40OCS2+348+686ZL" alt="">

    <hr style="border:none; border-top:2px dashed green; margin:20px 0;">
    <!-- 当日News入力　ここまで -->
  </div>
</body>
</html>
